<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Crossdomain-xhr : " />
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/demo.css">
    <title>Crossdomain XHR- Examples</title>
</head>
<body>
    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header>
          <a id="forkme_banner" href="https://github.com/ebay/crossdomain-xhr">View on GitHub</a>
          <h1 id="project_title">Crossdomain XHR - Examples</h1>
          <h2 id="project_tagline"></h2>

      </header>
  </div>

  <!-- MAIN CONTENT -->
  <div id="main_content_wrap" class="outer">
      <section id="main_content">
        <h4>Example 1 - Simple XHR POST</h4>
        <p> This example executes a simple XHR get on current browser location
            <input class="block" type="button" id="simple-xhr-get" value="Ajax GET"></input>
        </p>
        <p id="get-result">

        </p>



    <h4>Example 2 - Simple XHR POST</h4>
    <p> This example executes a simple XHR get on current browser location
        <input class="block" type="button" id="simple-xhr-post" value="Ajax Post"></input>
    </p>
        <p id="post-result">

        </p>


        <h4>Example 3 - Cross Domain XHR GET</h4>
        <p> This example executes a simple XHR get on current browser location
            <input class="block" type="button" id="c-xhr-get" value="Ajax GET"></input>
        </p>
        <p id="cxhr-get-result">

        </p>

</section>
</div>

<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
  <footer>
    <p class="copyright">Crossdomain-xhr maintained by <a href="https://github.com/ramahadevan">ramahadevan</a></p>
    <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
</footer>
</div>
<script type="text/javascript" src="javascripts/crossdomain-xhr.min.js"></script>
<script type="text/javascript">

'use strict';
cXHR.config.set({
    'useSIFR': true,
    'allowedOrigins': '*',
    'sifrGateway': 'sifr.html'
});

function bindEvent($elId, eventName, callback) {
    document.getElementById($elId).addEventListener(eventName, callback);
}

function onSuccess(status, cbResult, xhr){
    showCallbackResult({status: status, result: cbResult, xhr: xhr});
}

function onError(errorCode, error, xhr){
    showCallbackResult({status: errorCode, result: error, xhr: xhr, isErrored : true});
}

function showCallbackResult(callbackResult){
    console.log(callbackResult);
}



bindEvent("simple-xhr-get","click",function(){
    var url = window.location.href;
    cXHR.ajax.GET(url, {}, function onSuccess(status, cbResult, xhr){
        document.getElementById("get-result").innerHTML += "<p class='result' data-iserror='false'>GET for " + window.location.href + " Returned with " + status + "</p>";
    }, onError);
});

bindEvent("simple-xhr-post","click",function(){
    var url = window.location.href;
    cXHR.ajax.POST(window.location.href, {}, function onSuccess(status, cbResult, xhr){
        document.getElementById("post-result").innerHTML += "<p class='result' data-iserror='false'>GET for " + window.location.href + " Returned with " + status + "</p>";
    }, function onError(errorCode, error, xhr){
        document.getElementById("post-result").innerHTML += "<p class='result' data-iserror='true'>POST for " + window.location.href + " Returned with " + errorCode + " : Only GET Supported for this page</p>";
    });
});

bindEvent("c-xhr-get","click",function(){
    var url = "http://floating-peak-3869.herokuapp.com/keywords";
    console.log(url);
    cXHR.ajax.GET(url, {}, function onSuccess(status, cbResult, xhr){
        document.getElementById("cxhr-get-result").innerHTML += "<p class='result' data-iserror='false'>GET for " + url + " Returned with " + status + "</p>";
    }, function onError(errorCode, error, xhr){
        document.getElementById("cxhr-get-result").innerHTML += "<p class='result' data-iserror='true'>POST for " + window.location.href + " Returned with " + errorCode + " : Only GET Supported for this page</p>";
    });
});

</script>
</body>
</html>